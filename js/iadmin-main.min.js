/* iadmin v1.0 */
const logoText="iadmin",logoIcon="<i class='fa fa-pied-piper'></i>";if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){$(".i-tab>.layui-nav, .i-tab>.i-tab-title").hide();$(".i-tab>.layui-card-header").show()}layui.use(["layer","element","form"],function(){var e=layui.layer,a=layui.form;$(".i-iframe").height($(window).height()-92);g();$(window).resize(function(){$(".i-iframe").height($(window).height()-92);if($("[i-attr=navTab]>ul").outerWidth(true)<$("[i-attr=navTab]").width()){$("[i-attr=navTab] ul").css("left",0);$("[i-filter=navTab]").removeClass("i-on")}else{$("[i-filter=navTab]").addClass("i-on")}g()});$(".i-mask").click(function(){$("[i-attr=scaling]").children().attr("class","fa fa-caret-square-o-right");if($(window).width()<=768){$(".iadmin").toggleClass("i-on-sm")}$(".iadmin").addClass("i-on")});$("[i-attr=btnSystemSet]").click(function(){$("[i-attr=systemSet]").css("right",0).before('<div class="i-body-mask"></div>')});$("body").on("click",".i-body-mask",function(){$(this).remove();$("[i-attr=systemSet]").css("right","-300px")});$("body").on("mouseenter mouseleave","[i-attr=about]",function(m){var l=$(this),m=m||window.event,k=m.type;if(k=="mouseenter"){aboutTipsIndex=e.tips(l.attr("i-title"),l,{time:20000})}if(k=="mouseleave"){e.close(aboutTipsIndex)}});function g(){if($(window).width()<=768){$("[i-attr=scaling]").children().attr("class","fa fa-caret-square-o-right");$(".i-menu-logo").html(logoIcon);$(".i-menu-nav").find("dl").slideUp(160).siblings("a").removeClass("i-on");$(".iadmin").removeClass("i-on-sm").addClass("i-on")}else{$("[i-attr=scaling]").children().attr("class","fa fa-caret-square-o-left");$(".i-menu-logo").html(logoText);$(".iadmin").removeClass("i-on").removeClass("i-on-sm")}}$("[i-attr=scaling]").click(function(){var k=$(this).children();if($(".iadmin").hasClass("i-on")){k.attr("class","fa fa-caret-square-o-left");$(".i-menu-logo").html(logoText);if($("[i-attr=navTab]>ul").outerWidth(true)>$("[i-attr=navTab]").width()-150){$("[i-filter=navTab]").addClass("i-on")}}else{k.attr("class","fa fa-caret-square-o-right");$(".i-menu-logo").html(logoIcon);$(".i-menu-nav").find("dl").slideUp(160).siblings("a").removeClass("i-on");if($("[i-attr=navTab]>ul").outerWidth(true)<$("[i-attr=navTab]").width()+150){$("[i-attr=navTab] ul").css("left",0);$("[i-filter=navTab]").removeClass("i-on")}}if($(window).width()<=768){$(".iadmin").toggleClass("i-on-sm")}$(".iadmin").toggleClass("i-on")});$(".i-menu-nav").on("mouseenter mouseleave","ul>li",function(n){var m=$(".iadmin").hasClass("i-on"),l=$(this),n=n||window.event,k=n.type;if(m&&k=="mouseenter"){menuTipsIndex=e.tips(l.find("span").text(),l,{time:5000})}if(m&&k=="mouseleave"){e.close(menuTipsIndex)}});$(".i-menu-nav").on("click","ul>li>a",function(){var k=$(this),m=$(".iadmin").hasClass("i-on"),l=k.find("i").hasClass("i-icon-right"),n=k.parent().data("id");if(!l){$(".i-tab .layui-breadcrumb *").remove();$(".i-tab .layui-breadcrumb").append("<a href='javascript:;'>主页</a><span lay-separator>/</span><a><cite>"+k.text()+"</cite></a>");d(k);k.toggleClass("i-on").siblings("dl").slideToggle(160).parent().siblings("li").find("dl").slideUp(160).siblings("a").removeClass("i-on")}else{if(m){e.close(menuTipsIndex);$(".iadmin").removeClass("i-on");$(".i-menu-logo").html(logoText);k.addClass("i-on").siblings("dl").fadeIn(160);$("[i-attr=scaling]").children().attr("class","fa fa-caret-square-o-left")}else{k.toggleClass("i-on").siblings("dl").slideToggle(160).parent().siblings("li").find("dl").slideUp(160).siblings("a").removeClass("i-on")}}});$(".i-menu-nav").on("click","ul>li>dl>dd>a",function(){$(this).addClass("i-on").parent().siblings().find("a").removeClass("i-on").parents(".i-menu-nav>ul>li").siblings().find("dl>dd>a").removeClass("i-on");$(".i-tab .layui-breadcrumb *").remove();$(".i-tab .layui-breadcrumb").append("<a href='javascript:;'>主页</a><span lay-separator>/</span><a><cite>"+$(this).parent().parent().siblings("a").text()+"</cite></a><span lay-separator>/</span><a><cite>"+$(this).text()+"</cite></a>");d($(this))});function d(p){var t=p.text(),l=p.data("url"),n=p.data("id"),s=false;if(l==""){e.msg("此菜单未配置url属性，无法打开");return false}$("[i-attr=navTab]").find("li").each(function(){var w=$(this).attr("lay-id");if(n==w){s=true;return false}});if(!s){f("navTab",{title:t,content:'<iframe class="i-iframe" src='+l+' width="100%" height='+($(window).height()-92)+">",id:n})}i("navTab",n);var u=$("[i-attr=navTab]"),m=u.find("ul"),v=u.find("li[lay-id="+n+"]");var r=Number(v.position().left),q=Number(m.position().left),k=Number(v.outerWidth(true)),o=Number(u.width());if(r>=o-k-q-60){$("[i-filter=navTab]").addClass("i-on");if(r>=o-k-q){m.css("left",o-r-k)}}if(r<-q){m.css("left",-r)}}$("[i-attr=navTab]").on("click","li",function(){var k=$(this).attr("lay-id");if(k!=undefined){$(this).addClass("layui-this").siblings().removeClass("layui-this");$("[i-attr='navTabContent'] .i-tab-item[lay-id="+k+"]").addClass("layui-show").siblings().removeClass("layui-show");if(k.substring(0,3)=="one"){$("a[data-id="+k+"]").parent().siblings("li").find("dl").slideUp(160).siblings("a").removeClass("i-on")}else{if(k.substring(0,3)=="two"){$("a[data-id="+k+"]").parent().parent().slideDown(160).siblings("a").addClass("i-on").parent().siblings("li").find("dl").slideUp(160).siblings("a").removeClass("i-on").siblings("dl").find("dd>a").removeClass("i-on").parents(".i-menu-nav").find("dd>a").removeClass("i-on")}}$("a[data-id="+k+"]").addClass("i-on")}});$('[i-attr="navTab"]').on("click","ul>li>a>.i-tab-close",function(){j("navTab",$(this).parent().parent().attr("lay-id"))});$("[i-attr=navTab]").mousewheel(function(m,o){var k=o>0?"Up":"Down",l=$(this),r=l.children("ul"),n=Number(r.position().left),q=Number(r.width()),p=Number(l.width());if(q<p){r.css("left",0);$("[i-filter=navTab]").removeClass("i-on");return false}if(k=="Up"){if(-n<120){r.css("left",0)}else{r.css("left",n+120)}}else{if((q-p+n)<120){r.css("left",p-q)}else{r.css("left",n-120)}}});$("[i-attr=tabLeft]").click(function(){var m=$("[i-attr=navTab]"),k=m.width(),p=m.find("ul"),l=p.position().left,o=p.outerWidth(true),n=l+k;if(o<k){p.css("left",0);$("[i-filter=navTab]").removeClass("i-on");return false}if(l==0){e.msg("到头了");return false}if(n>0){n=0}p.css("left",n)});$("[i-attr=tabRight]").click(function(){var m=$("[i-attr=navTab]"),k=m.width(),p=m.find("ul"),l=p.position().left,o=p.outerWidth(true),n=l-k;if(o<k){p.css("left",0);$("[i-filter=navTab]").removeClass("i-on");return false}if(parseInt(k-o)==parseInt(l)){e.msg("到头了");return false}if(n<k-o){n=k-o}p.css("left",n)});$("[i-attr=i-home]").click(function(){$(".i-menu-nav").find("dl").slideUp(160)});$("[i-attr=fullScreen]").click(function(){var k=$(this).children();if(k.hasClass("fa-expand")){h();k.attr("class","fa fa-compress")}else{b();k.attr("class","fa fa-expand")}});$("[i-attr=repeat]").click(function(){$("[i-attr=navTabContent] .i-tab-item").each(function(){if($(this).hasClass("layui-show")){var k=$(this).find("iframe");k.attr("src",k.attr("src"));return false}})});$("[i-attr=closeThis]").click(function(){$("[i-attr=navTab] li").each(function(){var k=$(this);if(k.hasClass("layui-this")){if(k.attr("i-attr")=="i-home"){e.msg("系统首页不能关闭",{time:1000});return false}else{j("navTab",k.attr("lay-id"))}}})});$("[i-attr=closeOther]").click(function(){var k=1;if($("[i-attr=navTab] li.layui-this").index()>0){k=2}if($("[i-attr=navTab] li").length<=k){e.msg("没有可关闭的了",{time:1000});return false}$("[i-attr=navTab] li").each(function(){var l=$(this);if(!l.hasClass("layui-this")){var m=l.attr("lay-id");if(m!=-1){j("navTab",m)}}});$("[i-attr=navTab] ul").css("left",0);$("[i-filter=navTab]").removeClass("i-on")});$("[i-attr=closeAll]").click(function(){if($("[i-attr=navTab] li").length<=1){e.msg("没有可关闭的了",{time:1000});return false}$("[i-attr=navTab] li").each(function(){var k=$(this).attr("lay-id");if(k!=-1){j("navTab",k)}});$("[i-attr=navTab] ul").css("left",0);$("[i-filter=navTab]").removeClass("i-on")});function h(){var k=document.documentElement;var l=k.requestFullScreen||k.webkitRequestFullScreen||k.mozRequestFullScreen||k.msRequestFullScreen,m;if(typeof l!="undefined"&&l){l.call(k);return}if(typeof window.ActiveXObject!="undefined"){m=new ActiveXObject("WScript.Shell");if(m){m.SendKeys("{F11}")}}}function b(){var l=document,k=l.cancelFullScreen||l.webkitCancelFullScreen||l.mozCancelFullScreen||l.exitFullScreen,m;if(typeof k!="undefined"&&k){k.call(l);return}if(typeof window.ActiveXObject!="undefined"){m=new ActiveXObject("WScript.Shell");if(m!=null){m.SendKeys("{F11}")}}}function f(o,l){if(l.id==null){e.msg("ID为必要参数，请赋值！");return false}var p=$("[i-filter="+o+"]"),k=p.find(".i-tab-title ul"),q=p.find(".i-tab-content");var n='<li class="layui-nav-item" lay-id='+l.id+'><a href="javascript:;">'+l.title+'<i class="layui-icon layui-unselect i-tab-close">&#x1006;</i>'+"</a></li>";var m='<div class="i-tab-item" lay-id='+l.id+">"+l.content+"</div>";k.append(n);q.append(m)}function j(l,n){var k=$("[i-filter="+l+"] .i-tab-title>ul>li[lay-id="+n+"]"),m=$("[i-filter="+l+"]>.i-tab-content>.i-tab-item[lay-id="+n+"]");if(k.hasClass("layui-this")){k.prev().addClass("layui-this");m.prev().addClass("layui-show")}k.remove();m.remove()}function i(k,l){$("[i-filter="+k+"] .i-tab-title>ul>li[lay-id="+l+"]").addClass("layui-this").siblings().removeClass("layui-this");$("[i-filter="+k+"]>.i-tab-content>.i-tab-item[lay-id="+l+"]").addClass("layui-show").siblings().removeClass("layui-show")}$(".i-tab-title ul").sortable({axis:"x"});$(".i-menu-nav ul").sortable({axis:"y"});a.on("switch(systemSet)",function(k){store.set(k.value,k.elem.checked);c()});store.forEach(function(k,l){$("input[name=systemSet][value="+k+"]").attr("checked",l);a.render("checkbox")});c();function c(){for(var k=0;k<$("[i-attr=systemSet] input").length;k++){var l=$("[i-attr=systemSet] input").eq(k).is(":checked");switch(k){case 0:if(l){$(".i-menu-nav ul").sortable({disabled:false})}else{$(".i-menu-nav ul").sortable({disabled:true})}break;case 1:if(l){$(".i-tab-title ul").sortable({disabled:false})}else{$(".i-tab-title ul").sortable({disabled:true})}break;default:break}}}});